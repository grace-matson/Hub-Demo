{
  "parents": [
    "system:cdap-data-streams[4.0.0,6.0.0-SNAPSHOT)"
  ],
  "properties": {
    "widgets.KinesisSource-streamingsource": "{\"metadata\":{\"spec-version\":\"1.0\"},\"configuration-groups\":[{\"label\":\"Kinesis Configuration\",\"properties\":[{\"widget-type\":\"textbox\",\"label\":\"Reference Name\",\"name\":\"referenceName\"},{\"widget-type\":\"textbox\",\"label\":\"Application Name\",\"name\":\"appName\"},{\"widget-type\":\"textbox\",\"label\":\"Stream Name\",\"name\":\"streamName\"},{\"widget-type\":\"textbox\",\"label\":\"Kinesis endpoint url\",\"name\":\"endpointUrl\"},{\"widget-type\":\"select\",\"label\":\"region\",\"name\":\"region\",\"widget-attributes\":{\"values\":[\"us-east-1\",\"us-east-2\",\"us-west-1\",\"us-west-2\",\"ca-central-1\",\"ap-south-1\",\"ap-northeast-2\",\"ap-southeast-1\",\"ap-southeast-2\",\"ap-northeast-1\",\"eu-central-1\",\"eu-west-1\",\"sa-east-1\"],\"default\":\"us-east-1\"}},{\"widget-type\":\"textbox\",\"label\":\"Checkpoint interval duration\",\"name\":\"duration\"},{\"widget-type\":\"select\",\"label\":\"Initial position in stream\",\"name\":\"initialPosition\",\"widget-attributes\":{\"values\":[\"LATEST\",\"TRIM_HORIZON\"],\"default\":\"LATEST\"}},{\"widget-type\":\"textbox\",\"label\":\"AWS access key id\",\"name\":\"awsAccessKeyId\"},{\"widget-type\":\"password\",\"label\":\"AWS access secret\",\"name\":\"awsAccessSecret\"}]},{\"label\":\"Format\",\"properties\":[{\"widget-type\":\"select\",\"label\":\"Format\",\"name\":\"format\",\"widget-attributes\":{\"values\":[\"\",\"avro\",\"binary\",\"clf\",\"csv\",\"grok\",\"syslog\",\"text\",\"tsv\"],\"default\":\"\"}}]}],\"outputs\":[{\"name\":\"schema\",\"widget-type\":\"schema\",\"widget-attributes\":{\"default-schema\":{\"name\":\"etlSchemaBody\",\"type\":\"record\",\"fields\":[{\"name\":\"body\",\"type\":[\"bytes\",\"null\"]}]},\"schema-default-type\":\"string\",\"property-watch\":\"format\"}}]}",
    "doc.KinesisSource-streamingsource": "# Amazon Kinesis spark streaming source\n\nDescription\n-----------\nSpark streaming source that reads from AWS Kinesis streams.\n\nUse Case\n--------\nThis source is used when you want to read data from a Kinesis stream in real-time. For example, you may want to read\ndata from a Kinesis stream write it to a CDAP dataset.\n\nProperties\n----------\n**appName:** The name of the Kinesis application. The application name that is used to checkpoint the Kinesis sequence\nnumbers in DynamoDB table. (Macro-enabled)\n\n**streamName:** The name of the Kinesis stream to the get the data from. The stream should be active. (Macro-enabled)\n\n**duration:** The interval in milliseconds at which the Kinesis Client Library saves its position in the stream.\n(Macro-enabled)\n\n**region:** Valid Kinesis region URL eg. ap-south-1. Default value is us-east-1.\n\n**endpointUrl:** Valid Kinesis endpoint URL eg. Kinesis.us-east-1.amazonaws.com. (Macro-enabled)\n\n**accessID:** The access Id provided by AWS required to access the Kinesis streams. The Id can be stored in CDAP secure\nstore and can be provided as macro configuration. (Macro-enabled)\n\n**accessKey:** AWS access key secret having access to Kinesis streams. The key can be stored in CDAP secure store and\ncan be provided as macro configuration. (Macro-enabled)\n\n**initialPosition:** Initial position in the stream. Can be either TRIM_HORIZON or LATEST, Default position will be\nLatest.\n\n**format:** Optional format of the Kinesis shard payload. Any format supported by CDAP is supported. For example, a\nvalue of 'csv' will attempt to parse Kinesis payloads as comma-separated values. If no format is given, Kinesis payloads\nwill be treated as bytes.\n\nExample\n-------\nThis example will read from Kinesis stream named 'MyKinesisStream'. It will spin up 1 Kinesis Receiver per shard for the\ngiven stream. It starts pulling from the last checkpointed sequence number of the given stream.\n\n    {\n        \"name\": \"KinesisSource\",\n        \"type\": \"streamingsource\",\n        \"properties\": {\n            \"appName\": \"myKinesisApp\",\n            \"streamName\": \"MyKinesisStream\",\n            \"accessID\": \"my_aws_access_key\",\n            \"accessKey\": \"my_aws_access_secret\",\n            \"endpointUrl\": \"1\",\n            \"duration\": \"2000\",\n            \"initialPosition\": \"Latest\",\n            \"format\": \"csv\",\n            \"schema\": \"{\n                    \\\"type\\\":\\\"record\\\",\n                    \\\"name\\\":\\\"purchase\\\",\n                    \\\"fields\\\":[\n                        {\\\"name\\\":\\\"user\\\",\\\"type\\\":\\\"string\\\"},\n                        {\\\"name\\\":\\\"item\\\",\\\"type\\\":\\\"string\\\"},\n                        {\\\"name\\\":\\\"count\\\",\\\"type\\\":\\\"int\\\"},\n                        {\\\"name\\\":\\\"price\\\",\\\"type\\\":\\\"double\\\"}\n                    ]\n            }\n        }\n    }\n\nFor each Kinesis message read, it will output a record with the schema:\n\n    +================================+\n    | field name  | type             |\n    +================================+\n    | user        | string           |\n    | item        | string           |\n    | count       | int              |\n    | price       | double           |\n    +================================+\n"
  }
}
